$.fn.ajaxChosen=function(n){var a;return this.each(function(){var a=$(this),t=a.parent(),l=a.val(),u=[],o=n.valueAttribute,c=n.getParams||[],i=n.searchType,r=n.callbackHandler;$.each(a.find("option"),function(n,a){var e=$(a);u.push({id:e.attr("value"),name:e.text()})});var s;a.chosen({max_selected_options:5}),t.on("keyup",".chosen-search input",function(){s=$(this),e(s.val(),t,a,s,l,u,o,c,i,r)}),e("",t,a,s,l,u,o,c,i,r)});function e(e,t,l,u,o,c,i,r,s,h){var p=!0,v="",d=n.url,m=[];m=m.concat(r),void 0!==a&&a.abort(),$(".no-results",t).html("Loading..."),null!=s&&null!=s&&null!=s.name&&""!=s.name&&(p=!1,""!=e&&(s.value=e,m.push(s))),null!=m&&(v=jQuery.param(m)),p&&(d+=e),d+="?"+v,a=$.ajax({url:d,success:function(n){l.html(""),n=c.concat(n),null!=i&&""!=i||(i="id"),$.each(n,function(n,a){a[i]==o?l.append($("<option />").val(a[i]).html(a.name).attr("selected","selected")):l.append($("<option />").val(a[i]).html(a.name))}),l.trigger("chosen:updated"),null!=h&&h(),setTimeout(function(){void 0!==u&&u.val(e)},1)}})}};